export HIVE_VERSION=4.0.0
# Запуск контейнера
docker run -d -p 10000:10000 -p 10002:10002 --env SERVICE_NAME=hiveserver2 --name hive4 apache/hive:${HIVE_VERSION}

# Доступ к beeline
docker exec -it hive4 beeline -u 'jdbc:hive2://localhost:10000/'

# Создание таблиц
docker exec -i hive4 beeline -u 'jdbc:hive2://localhost:10000/' < ./create.sql

# Генерируем данные, спасибо chatgpt (они странные, но вроде для теста пойдет)
python3 generate.py

# Копирование CSV файлов в контейнер 
docker cp vacancy.csv hive4:/tmp/vacancy.csv
docker cp resume.csv hive4:/tmp/resume.csv
docker cp area.csv hive4:/tmp/area.csv
docker cp currency.csv hive4:/tmp/currency.csv

# Загрузка CSV в БД
docker exec -i hive4 beeline -u 'jdbc:hive2://localhost:10000/' < ./load_data.sql

# Задания
docker exec -i hive4 beeline -u 'jdbc:hive2://localhost:10000/' < ./sql-part/task1.sql
docker exec -i hive4 beeline -u 'jdbc:hive2://localhost:10000/' < ./sql-part/task2.sql
docker exec -i hive4 beeline -u 'jdbc:hive2://localhost:10000/' < ./sql-part/task3.sql

# Tableau
https://public.tableau.com/app/profile/aleksandr.chukhrii/viz/hh-test-taskv2/Dashboard1
